# ===================================
# CONFIGURACION DEL SERVIDOR
# ===================================
server.port=8080
spring.application.name=tutodo-backend

# ===================================
# CONFIGURACION DE SUPABASE (PostgreSQL)
# ===================================
# IMPORTANTE: Configura estas variables de entorno o reemplaza con tus credenciales
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://[YOUR-HOST]:6543/postgres?user=[YOUR-USER]}
spring.datasource.username=${DATABASE_USERNAME:[YOUR-USERNAME]}
spring.datasource.password=${DATABASE_PASSWORD:[YOUR-PASSWORD]}
spring.datasource.driver-class-name=org.postgresql.Driver

# Supabase Service Role Key (para subir archivos)
supabase.service.role.key=${SUPABASE_SERVICE_ROLE_KEY:[YOUR-SERVICE-ROLE-KEY]}

# ===================================
# CONFIGURACION JPA/HIBERNATE
# ===================================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# FIX para Supabase PgBouncer - Deshabilitar prepared statements
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.datasource.hikari.auto-commit=true

# ===================================
# CONFIGURACION DE HIKARICP (Pool de Conexiones)
# ===================================
# Reducir pool para plan gratuito de Supabase
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# ===================================
# CONFIGURACION DE ARCHIVOS (Subida de imagenes)
# ===================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# ===================================
# SUPABASE STORAGE
# ===================================
supabase.url=${SUPABASE_URL:https://[YOUR-PROJECT].supabase.co}
supabase.key=${SUPABASE_KEY:[YOUR-ANON-KEY]}

# ===================================
# CORS (Permitir Angular)
# ===================================
cors.allowed-origins=http://localhost:4200

# ===================================
# CONFIGURACION DE LOGS
# ===================================
logging.level.org.hibernate.SQL=DEBUG

# ===================================
# CONFIGURACION DE SOPORTE
# ===================================
app.soporte.email=soportetecnicotutodo@gmail.com
